<html>
    <head>
        <script src="https://www.google.com/jsapi"></script>
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script src="https://jquery-csv.googlecode.com/files/jquery.csv-0.71.js"></script>
        <script>
            google.load("visualization", "1.1", {packages:["annotationchart"]});
            google.setOnLoadCallback(drawChart);
                function sqlTimeStampToDate(timestamp) {
                    //function parses sql datetime string and returns javascript Date object
                    //input has to be in this format: 2007-06-05 15:26:02
                    var regex=/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/;
                    var parts=timestamp.replace(regex,"$1 $2 $3 $4 $5 $6").split(' ');
                    return new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);
                  }

                function drawChart() {
                    var file_name = formatLocalDate().slice(0,10);
                    file_name = file_name.concat("_local.csv")
                    file_name = "logs/".concat(file_name)
                    $.get(file_name, function(csvString) {
                    var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar})
                    for (i=0; i<arrayData.length; i++){
                        if (i != 0){
                            arrayData[i][0] = sqlTimeStampToDate(arrayData[i][0])
                        }
                    }

                    var data = new google.visualization.arrayToDataTable(arrayData);
                    var view = new google.visualization.DataView(data);
                    var options =  {
                        range: {
                          ui: {
                            chartView: { columns: [0, 1] }
                          }
                         },
                        min: 0,
                        max: 2.1,
                        fill: 20
                        }
                    var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div1'));
                    chart.draw(view, options);
                });
            }
        </script>
        <script>
            google.load("visualization", "1.1", {packages:["annotationchart"]});
            google.setOnLoadCallback(drawChart);
                function sqlTimeStampToDate(timestamp) {
                    //function parses sql datetime string and returns javascript Date object
                    //input has to be in this format: 2007-06-05 15:26:02
                    var regex=/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/;
                    var parts=timestamp.replace(regex,"$1 $2 $3 $4 $5 $6").split(' ');
                    return new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);
                  }

                function formatLocalDate() {
                    var now = new Date(),
                        tzo = -now.getTimezoneOffset(),
                        dif = tzo >= 0 ? '+' : '-',
                        pad = function(num) {
                            var norm = Math.abs(Math.floor(num));
                            return (norm < 10 ? '0' : '') + norm;
                        };
                    return now.getFullYear()
                        + '-' + pad(now.getMonth()+1)
                        + '-' + pad(now.getDate())
                        + 'T' + pad(now.getHours())
                        + ':' + pad(now.getMinutes())
                        + ':' + pad(now.getSeconds())
                        + dif + pad(tzo / 60)
                        + ':' + pad(tzo % 60);
                }

                function drawChart() {
                    var file_name = formatLocalDate().slice(0,10);
                    file_name = file_name.concat("_google.csv")
                    file_name = "logs/".concat(file_name)
                    $.get(file_name, function(csvString) {
                    var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar})
                    for (i=0; i<arrayData.length; i++){
                        if (i != 0){
                            arrayData[i][0] = sqlTimeStampToDate(arrayData[i][0])
                        }
                    }

                    var data = new google.visualization.arrayToDataTable(arrayData);
                    var view = new google.visualization.DataView(data);
                    var options =  {
                        colors: ['#CF9E00'],
                        min: 0,
                        max: 27,
                        fill: 20
                        }
                    var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div2'));
                    chart.draw(view, options);
                });
            }
        </script>
        <script>
            google.load("visualization", "1.1", {packages:["annotationchart"]});
            google.setOnLoadCallback(drawChart);
                function sqlTimeStampToDate(timestamp) {
                    //function parses sql datetime string and returns javascript Date object
                    //input has to be in this format: 2007-06-05 15:26:02
                    var regex=/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/;
                    var parts=timestamp.replace(regex,"$1 $2 $3 $4 $5 $6").split(' ');
                    return new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);
                  }

                function formatLocalDate() {
                    var now = new Date(),
                        tzo = -now.getTimezoneOffset(),
                        dif = tzo >= 0 ? '+' : '-',
                        pad = function(num) {
                            var norm = Math.abs(Math.floor(num));
                            return (norm < 10 ? '0' : '') + norm;
                        };
                    return now.getFullYear()
                        + '-' + pad(now.getMonth()+1)
                        + '-' + pad(now.getDate())
                        + 'T' + pad(now.getHours())
                        + ':' + pad(now.getMinutes())
                        + ':' + pad(now.getSeconds())
                        + dif + pad(tzo / 60)
                        + ':' + pad(tzo % 60);
                }

                function drawChart() {
                    var file_name = formatLocalDate().slice(0,10);
                    file_name = file_name.concat("_sys.csv")
                    file_name = "logs/".concat(file_name)
                    $.get(file_name, function(csvString) {
                    var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar})
                    for (i=0; i<arrayData.length; i++){
                        if (i != 0){
                            arrayData[i][0] = sqlTimeStampToDate(arrayData[i][0])
                        }
                    }

                    var data = new google.visualization.arrayToDataTable(arrayData);
                    var view = new google.visualization.DataView(data);
                    var options =  {
                        colors: ['#17A61C','#C22791'],
                        min: 0,
                        max: 110,
                        fill: 20
                        }
                    var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div3'));
                    chart.draw(view, options);
                });
            }
        </script>
        <script>
            google.load("visualization", "1.1", {packages:["annotationchart"]});
            google.setOnLoadCallback(drawChart);
                function sqlTimeStampToDate(timestamp) {
                    //function parses sql datetime string and returns javascript Date object
                    //input has to be in this format: 2007-06-05 15:26:02
                    var regex=/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/;
                    var parts=timestamp.replace(regex,"$1 $2 $3 $4 $5 $6").split(' ');
                    return new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);
                  }

                function formatLocalDate() {
                    var now = new Date(),
                        tzo = -now.getTimezoneOffset(),
                        dif = tzo >= 0 ? '+' : '-',
                        pad = function(num) {
                            var norm = Math.abs(Math.floor(num));
                            return (norm < 10 ? '0' : '') + norm;
                        };
                    return now.getFullYear()
                        + '-' + pad(now.getMonth()+1)
                        + '-' + pad(now.getDate())
                        + 'T' + pad(now.getHours())
                        + ':' + pad(now.getMinutes())
                        + ':' + pad(now.getSeconds())
                        + dif + pad(tzo / 60)
                        + ':' + pad(tzo % 60);
                }

                function drawChart() {
                    var file_name = formatLocalDate().slice(0,10);
                    file_name = file_name.concat("_ts.csv")
                    file_name = "logs/".concat(file_name)
                    $.get(file_name, function(csvString) {
                    var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar})
                    for (i=0; i<arrayData.length; i++){
                        if (i != 0){
                            arrayData[i][0] = sqlTimeStampToDate(arrayData[i][0])
                        }
                    }

                    var data = new google.visualization.arrayToDataTable(arrayData);
                    data.removeColumns(2,3);
                    var view = new google.visualization.DataView(data);
                    var options =  {
                        colors: ['black'],
                        range: {
                          ui: {
                            chartView: { columns: [0, 1] },
                            chartOptions: { colors: ['black'] }
                          }
                         },
                        min: 0,
                        max: 120,
                        fill: 20
                        }
                    var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div5'));
                    chart.draw(view, options);
                });
            }
        </script>
        <script>
            google.load("visualization", "1.1", {packages:["annotationchart"]});
            google.setOnLoadCallback(drawChart);
                function sqlTimeStampToDate(timestamp) {
                    //function parses sql datetime string and returns javascript Date object
                    //input has to be in this format: 2007-06-05 15:26:02
                    var regex=/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/;
                    var parts=timestamp.replace(regex,"$1 $2 $3 $4 $5 $6").split(' ');
                    return new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);
                  }

                function formatLocalDate() {
                    var now = new Date(),
                        tzo = -now.getTimezoneOffset(),
                        dif = tzo >= 0 ? '+' : '-',
                        pad = function(num) {
                            var norm = Math.abs(Math.floor(num));
                            return (norm < 10 ? '0' : '') + norm;
                        };
                    return now.getFullYear()
                        + '-' + pad(now.getMonth()+1)
                        + '-' + pad(now.getDate())
                        + 'T' + pad(now.getHours())
                        + ':' + pad(now.getMinutes())
                        + ':' + pad(now.getSeconds())
                        + dif + pad(tzo / 60)
                        + ':' + pad(tzo % 60);
                }

                function drawChart() {
                    var file_name = formatLocalDate().slice(0,10);
                    file_name = file_name.concat("_ts.csv")
                    file_name = "logs/".concat(file_name)
                    $.get(file_name, function(csvString) {
                    var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar})
                    for (i=0; i<arrayData.length; i++){
                        if (i != 0){
                            arrayData[i][0] = sqlTimeStampToDate(arrayData[i][0])
                        }
                    }

                    var data = new google.visualization.arrayToDataTable(arrayData);
                    data.removeColumns(4,1);
                    data.removeColumns(1,1);
                    var view = new google.visualization.DataView(data);
                    var options =  {
                        colors: ['#0765A8','#94CBF2'],
                        range: {
                          ui: {
                            chartView: { columns: [0, 2] },
                            chartOptions: { colors: ['#0765A8'] }
                          }
                         },
                        min: 0,
                        fill: 20
                        }
                    var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div4'));
                    chart.draw(view, options);
                });
            }
        </script>
        <script>
            google.load("visualization", "1.1", {packages:["annotationchart"]});
            google.setOnLoadCallback(drawChart);
                function sqlTimeStampToDate(timestamp) {
                    //function parses sql datetime string and returns javascript Date object
                    //input has to be in this format: 2007-06-05 15:26:02
                    var regex=/^([0-9]{2,4})-([0-1][0-9])-([0-3][0-9]) (?:([0-2][0-9]):([0-5][0-9]):([0-5][0-9]))?$/;
                    var parts=timestamp.replace(regex,"$1 $2 $3 $4 $5 $6").split(' ');
                    return new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5]);
                  }

                function formatLocalDate() {
                    var now = new Date(),
                        tzo = -now.getTimezoneOffset(),
                        dif = tzo >= 0 ? '+' : '-',
                        pad = function(num) {
                            var norm = Math.abs(Math.floor(num));
                            return (norm < 10 ? '0' : '') + norm;
                        };
                    return now.getFullYear()
                        + '-' + pad(now.getMonth()+1)
                        + '-' + pad(now.getDate())
                        + 'T' + pad(now.getHours())
                        + ':' + pad(now.getMinutes())
                        + ':' + pad(now.getSeconds())
                        + dif + pad(tzo / 60)
                        + ':' + pad(tzo % 60);
                }

                function drawChart() {
                    var file_name = formatLocalDate().slice(0,10);
                    file_name = file_name.concat("_ts.csv")
                    file_name = "logs/".concat(file_name)
                    $.get(file_name, function(csvString) {
                    var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar})
                    for (i=0; i<arrayData.length; i++){
                        if (i != 0){
                            arrayData[i][0] = sqlTimeStampToDate(arrayData[i][0])
                        }
                    }

                    var data = new google.visualization.arrayToDataTable(arrayData);
                    data.removeColumns(1,3);
                    var view = new google.visualization.DataView(data);
                    var options =  {
                        colors: ['#550096'],
                        range: {
                          ui: {
                            chartView: { columns: [0, 1] },
                            chartOptions: { colors: ['#550096'] }
                          }
                         },
                        min: 0,
                        max: 10,
                        fill: 20
                        }
                    var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div6'));
                    chart.draw(view, options);
                });
            }
        </script>
    </head>
    <body>
        <h2>Ping to Router and Localhost</h2>
        <div id="chart_div1" style='width: 900px; height: 300px;'></div>
        <h2>Ping to Google</h2>
        <div id="chart_div2" style='width: 900px; height: 300px;'></div>
        <h2>System Stats</h2>
        <div id="chart_div3" style='width: 900px; height: 300px;'></div>
        <h2>TS Bandwidth</h2>
        <div id="chart_div4" style='width: 900px; height: 300px;'></div>
        <h2>TS Average ping</h2>
        <div id="chart_div5" style='width: 900px; height: 300px;'></div>
        <h2>TS Clients Connected</h2>
        <div id="chart_div6" style='width: 900px; height: 300px;'></div>
    </body>
</html>